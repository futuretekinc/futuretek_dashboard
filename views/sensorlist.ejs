<% layout('layout') %>

<!-- Navigatiron -->
<div class="navbar navbar-default navbar-fixed-top">
    <div class="container">
    	  <div class="navbar-header">
        	  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            	<span class="icon-bar"></span>
            	<span class="icon-bar"></span>
            	<span class="icon-bar"></span>
          	</button>
          	<a class="navbar-brand" id="home" href="#" onclick="return false;">Futuretek Dashboard</a>
      	</div>
      	<div class="collapse navbar-collapse">
          	<ul class="nav navbar-nav">
            	<li id="monitoring"><a href="#" onclick="return false;">Monitoring</a></li>
            	<li id="sensorlist" class="active"><a href="#" onclick="return false;">Sensor List</a></li>
            	<li><a href="#">IFTTT</a></li>
          	</ul>
 	    </div><!--/.nav-collapse -->
    </div>
</div>

<!-- Sensor list 동적으로 불러와 List 추가 -->
<div class="container">
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">
            <h3 class="panel-title">Sensor List</h3>
        </div>
        <!-- Table -->
        <div class="table-responsive">
            <table id="table_sensor" class="table table-bordered">
                <tr>
                    <th style="width: 70px">#</th>
                    <th>Edge Node (ID)</th>
                    <th>Sensor (ID)</th>
                    <th>Status</th>
                    <th>Monitoring</th>
                </tr>
                <tbody>
                    <% for ( var i=0; i<sensors.length; i++ ) { %>
                    <tr>
                        <td>
                            <%= i + 1 %>
                        </td>
                        <td>
                            <%= edgenode[1].value + " (" + edgenode[0].value + ")" %>
                        </td>
                        <td>
                            <%= sensors[i].name + " (" + sensors[i].objects[0].id + ")" %>
                        </td>
                        <td>
                            <%= sensors[i].objects[0].status %>
                        </td>
                        <td>
                            <button id=<%='btn_config_' + i %> type='button' class='btn btn-primary btn-xs'
                                    onClick='setSensorInfo("<%= i %>","<%= edgenode[1].value + ' (' + edgenode[0].value + ')' %>", "<%= sensors[i].name %>")'>
                                Setting
                            </button>
                        </td>
                    </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- 모니터링 list에 추가 -->
<div class="container">
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">
            <h3 class="panel-title">Monitoring List</h3>
        </div>
        <!-- Table -->
        <div class="table-responsive">
            <table id="table_sensor" class="table table-bordered">
                <tr>
                    <th style="width: 70px">#</th>
                    <th>Edge Node (ID)</th>
                    <th>Sensor (ID)</th>
                    <th>Status</th>
                    <th>Discription</th>
                    <th>Config</th>
                </tr>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Add Sensor Setting Popup -->
<div class="modal" id="modal_add_sensor">
  	<div class="modal-dialog">
    	<div class="modal-content">
      		<div class="modal-header">
        		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        		<h4 class="modal-title" id="title_add_sensor">Add Sensor</h4>
      		</div>
      		<div class="modal-body">
      			<label>ID</label>
                <input type="text" class="form-control" id="idInput" disabled="disabled">
                <br>
                <label>Sensor</label>
                <input type="text" class="form-control" id="sensorInput" disabled="disabled">
                <br>
      			<label for="nameInput">Name</label>
				<input type="text" class="form-control" id="nameInput" placeholder="Name">
				<br>
        		<label for="descriptionInput">Description</label>
				<input type="text" class="form-control" id="descriptionInput" placeholder="Description">
				<br>
      		</div>
      		<div class="modal-footer">
        		<button type="button" class="btn btn-default" data-dismiss="modal" onclick="clearInput()">Close</button>
        		<button type="button" class="btn btn-primary" id="btn_save_sensor">Save</button>
      		</div>
    	</div><!-- /.modal-content -->
  	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<script type="text/javascript" src="javascripts/util.js"></script>
<script type="text/javascript" src="javascripts/sensorlist.js"></script>